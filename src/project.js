window.__require=function t(e,o,n){function c(r,s){if(!o[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return c(e[r][1][t]||t)},u,u.exports,t,e,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)c(n[r]);return c}({AdManager:[function(t,e,o){"use strict";cc._RF.push(e,"36cf97NVB9Fy4j5PxvCsrfH","AdManager"),cc.Class({extends:cc.Component,properties:{androidLink:{default:""},iosLink:{default:""},defaultLink:{default:""}},openAdUrl:function(){window.androidLink=this.androidLink,window.iosLink=this.iosLink,window.defaultLink=this.defaultLink,window.openAdUrl?window.openAdUrl():window.open()}}),cc._RF.pop()},{}],ChooseMap:[function(t,e,o){"use strict";cc._RF.push(e,"77f51adspBOTKveiLDIYZ3b","ChooseMap");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./map"),r=t("./itemMap"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.map=null,e.maps=Object.values(i.MAP),e}return n(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){this.content.removeAllChildren(),this.createListMap()},e.prototype.createListMap=function(){for(var t=0;t<this.maps.length;t++){var e=cc.instantiate(this.map);this.content.addChild(e),e.getComponent(r.default).setInfor(this.maps[t].level)}},e.prototype.onBtnClose=function(){this.node.active=!1},c([l(cc.Node)],e.prototype,"content",void 0),c([l(cc.Prefab)],e.prototype,"map",void 0),e=c([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./itemMap":"itemMap","./map":"map"}],Constant:[function(t,e,o){"use strict";cc._RF.push(e,"40a82sV4p1Cz7Rmo7qsGf2V","Constant"),Object.defineProperty(o,"__esModule",{value:!0}),o.Constant={EVENT:{CHOOSE_BOTTLE:"CHOOSE_BOTTLE",OPEN_BLOCK_TOUCH:"OPEN_BLOCK_TOUCH",CALL_POUR_WATER_DOWN:"CALL_POUR_WATER_DOWN",CALL_POUR_WATER_UP:"CALL_POUR_WATER_UP",BOTTLE_BACK:"BOTTLE_BACK",CHECK_FINISH_COLOR:"CHECK_FINISH_COLOR",CALL_WIN:"CALL_WIN",CHOOSE_LEVEL:"CHOOSE_LEVEL",AUTO_POUR_WATER:"AUTO_POUR_WATER"},CURRENT_MAX_LEVEL_STORAGE:"CURRENT_MAX_LEVEL_STORAGE",LEVEL_PLAYING_STORAGE:"LEVEL_PLAYING_STORAGE",COLOR_MAX:4},cc._RF.pop()},{}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"e79a6/ZhItPZKBGeb8iWk7l","Global");var n={BOTTLE_ID_ACTIVE:null,BOTTLE_ID_TARGET:null,IS_POURING_WATER_UP:!1,POUR_WATER_AMOUNT:null,COUNT_POUR_WATER:0,COLOR_FINISH_ARRAY:[],WIN:0,BOTTLE_TYPE:0,CHECK_PLAY:0,CURRENT_MAX_LEVEL:1,CURRENT_LEVEL_PLAYING:1,GetSetting:function(t,e){var o=cc.sys.localStorage.getItem(JSON.stringify(t));return o?JSON.parse(o):e},SetSetting:function(t,e){cc.sys.localStorage.setItem(JSON.stringify(t),JSON.stringify(e)),cc.log("localStorage: ",cc.sys.localStorage)}};cc.Global=n,cc._RF.pop()},{}],bottle:[function(t,e,o){"use strict";cc._RF.push(e,"a56f82i5yBEZKeYzE4HOS99","bottle");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Constant"),r=t("./game"),s=t("./water"),a=cc._decorator,l=a.ccclass,u=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listWater=null,e.waterLine=null,e.block=null,e.finish=null,e.pourWaterDownAnim=null,e.pourWaterUpAnim=null,e.bottleId=null,e.isActive=!1,e.distance=100,e.colorArr=[],e.game=null,e.waterId="waterId",e.countColor=1,e.originPos=null,e.originWaterLinePos=null,e.mapId=1,e.isFinish=!1,e.soundPour=null,e.soundFull=null,e.tempSound=null,e.efx=null,e}return n(e,t),e.prototype.start=function(){this.originPos=this.node.position,this.originWaterLinePos=this.waterLine.position,this.game=cc.Canvas.instance.node.getComponent(r.default),this.waterLine.active=!1,this.finish.active=!1,this.setBlock(!1),this.addEventListener()},e.prototype.addEventListener=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),cc.Canvas.instance.node.on(i.Constant.EVENT.CHOOSE_BOTTLE,this.onChooseBottle,this),cc.Canvas.instance.node.on(i.Constant.EVENT.OPEN_BLOCK_TOUCH,this.setBlock,this),cc.Canvas.instance.node.on(i.Constant.EVENT.BOTTLE_BACK,this.onBottleBack,this),cc.Canvas.instance.node.on(i.Constant.EVENT.CHECK_FINISH_COLOR,this.onCheckFinishColor,this)},e.prototype.onDisable=function(){cc.Canvas.instance.node.off(i.Constant.EVENT.CHOOSE_BOTTLE,this.onChooseBottle,this),cc.Canvas.instance.node.off(i.Constant.EVENT.OPEN_BLOCK_TOUCH,this.setBlock,this),cc.Canvas.instance.node.off(i.Constant.EVENT.BOTTLE_BACK,this.onBottleBack,this),cc.Canvas.instance.node.off(i.Constant.EVENT.CHECK_FINISH_COLOR,this.onCheckFinishColor,this)},e.prototype.spawnEfx=function(){var t=cc.instantiate(this.efx);t.parent=cc.Canvas.instance.node,t.x=this.node.x,t.y=this.node.y-255},e.prototype.onCheckFinishColor=function(){if(cc.Global.BOTTLE_ID_TARGET==this.bottleId){var t=!0;if(this.colorArr.length==i.Constant.COLOR_MAX)for(var e=0;e<this.colorArr.length&&e!=this.colorArr.length-1;e++)this.colorArr[e]!==this.colorArr[e+1]&&(t=!1);else t=!1;if(this.isFinish=t,this.unscheduleAllCallbacks(),t){this.spawnEfx(),cc.audioEngine.playEffect(this.soundFull,!1),this.finish.active=!0,this.scheduleOnce(function(){this.finish.active=!1}.bind(this),2);var o=this.colorArr[0];-1==cc.Global.COLOR_FINISH_ARRAY.indexOf(o)&&(cc.Global.COLOR_FINISH_ARRAY.push(o),cc.Global.COLOR_FINISH_ARRAY.length==cc.Global.WIN&&cc.Canvas.instance.node.emit(i.Constant.EVENT.CALL_WIN))}}},e.prototype.onChooseBottle=function(t,e){var o=t.bottleId;cc.Global.BOTTLE_ID_TARGET=o,this.setBlock(!0),cc.Global.BOTTLE_ID_ACTIVE||e?cc.Global.BOTTLE_ID_ACTIVE==o&&this.isActive?this.move(!1):this.checkPourWater(t,e):o==this.bottleId&&this.move(!0)},e.prototype.onTouchStart=function(){cc.Canvas.instance.node.emit(i.Constant.EVENT.CHOOSE_BOTTLE,this,cc.Global.BOTTLE_ID_ACTIVE),cc.Global.CHECK_PLAY++,1==cc.Global.CHECK_PLAY&&this.game.offGuide_1(),2==cc.Global.CHECK_PLAY&&this.game.offGuide_2(),this.game.offClickGuide3()},e.prototype.checkPourWater=function(t,e){if(t.colorArr.length==i.Constant.COLOR_MAX)this.isActive&&this.move(!1);else{var o=this.game.getBottleById(e);if(o&&0==o.colorArr.length&&this.isActive)return void o.move(!1);if(t.bottleId==this.bottleId){if(t.colorArr[t.colorArr.length-1]!==o.colorArr[o.colorArr.length-1]&&0!==t.colorArr.length)return void o.move(!1);this.runAnim(o)}}},e.prototype.runAnim=function(t){t.node.zIndex=255;var e=this.node.position.x<t.node.position.x?-1:1,o=this.node.position,n=(t.node.position,t.waterLine.position);t.waterLine.setPosition(cc.v2(n.x*e,n.y));var c=this.waterLine.position;this.waterLine.setPosition(cc.v2(0,c.y)),this.tempSound=cc.audioEngine.playEffect(this.soundPour,!1);var i=cc.spawn(cc.moveTo(.35,cc.v2(o.x-230*e,o.y+250)),cc.rotateTo(.3,80*e),cc.callFunc(function(){var o=this;t.listWater.runAction(cc.skewTo(.35,0,70*e)),this.scheduleOnce(function(){o.pourWater(t),o.scheduleOnce(function(){cc.audioEngine.stop(o.tempSound)},.3)},.32)}.bind(this)));t.node.runAction(i)},e.prototype.onBottleBack=function(){if(cc.Global.BOTTLE_ID_ACTIVE==this.bottleId){cc.Canvas.instance.node.emit(i.Constant.EVENT.CHECK_FINISH_COLOR),this.node.stopAllActions();var t=cc.spawn(cc.moveTo(.5,cc.v2(this.originPos.x,this.originPos.y)),cc.rotateTo(.5,0),cc.callFunc(function(){this.listWater.runAction(cc.sequence(cc.skewTo(.5,0,0),cc.callFunc(function(){this.isActive=!1,cc.Global.BOTTLE_ID_ACTIVE=null,cc.Canvas.instance.node.emit(i.Constant.EVENT.OPEN_BLOCK_TOUCH,!1),this.node.zIndex=0,cc.Canvas.instance.node.emit(i.Constant.EVENT.AUTO_POUR_WATER)}.bind(this))))}.bind(this)));this.node.runAction(t)}},e.prototype.pourWater=function(t){cc.Global.POUR_WATER_AMOUNT=1,cc.Global.COUNT_POUR_WATER=0;for(var e=1,o=t.colorArr,n=o.length-1;n>=0&&0!=n&&o[n]==o[n-1];n--)e++;var c=i.Constant.COLOR_MAX-this.colorArr.length;cc.Global.POUR_WATER_AMOUNT=c>e?e:c;var r=t.listWater.children,a=null;for(n=r.length-1;n>=0;n--)if(r[n].getComponent(s.default).colorId){a=r[n];break}a.getComponent(cc.Animation).play("pourWaterDown"),a.getComponent(s.default).runWaterWave(!1);var l=this.pourWaterDownAnim.duration*cc.Global.POUR_WATER_AMOUNT;t.waterLine.active=!0,t.waterLine.color=a.color;var u=t.waterLine.position;t.waterLine.runAction(cc.sequence(cc.moveTo(l,cc.v2(u.x,u.y+t.waterLine.height)),cc.callFunc(function(){t.waterLine.active=!1,t.waterLine.setPosition(t.originWaterLinePos)}.bind(this)))),this.waterLine.active=!0,this.waterLine.color=a.color;var h=this.waterLine.position;this.waterLine.runAction(cc.sequence(cc.delayTime(l),cc.moveTo(.5,cc.v2(h.x,h.y-t.waterLine.height)),cc.callFunc(function(){this.waterLine.active=!1,this.waterLine.setPosition(this.originWaterLinePos)}.bind(this))))},e.prototype.move=function(t){t&&(this.node.zIndex=255),this.isActive=t;var e=t?this.distance:-this.distance;cc.Global.BOTTLE_ID_ACTIVE=t?this.bottleId:null;var o=this.node.position,n=cc.callFunc(function(){cc.Canvas.instance.node.emit(i.Constant.EVENT.OPEN_BLOCK_TOUCH,!1),t||(this.node.zIndex=0),cc.Canvas.instance.node.emit(i.Constant.EVENT.AUTO_POUR_WATER)}.bind(this));this.node.runAction(cc.sequence(cc.moveTo(.5,cc.v2(o.x,o.y+e)),n))},e.prototype.setData=function(t,e){this.bottleId=t;for(var o=this.listWater.children,n=0;n<o.length;n++){var c=o[n],i=e[n],r=c.getComponent(s.default);r.bottleId=this.bottleId,r.waterId=n+1,e[n]?(r.colorId=i.id,c.color=i.code,this.colorArr.push(i.id),c.getComponent(cc.Sprite).fillRange=1):(r.colorId=null,c.getComponent(cc.Sprite).fillRange=0)}},e.prototype.setBlock=function(t){this.block.active=t},c([u(cc.Node)],e.prototype,"listWater",void 0),c([u(cc.Node)],e.prototype,"waterLine",void 0),c([u(cc.Node)],e.prototype,"block",void 0),c([u(cc.Node)],e.prototype,"finish",void 0),c([u(cc.AnimationClip)],e.prototype,"pourWaterDownAnim",void 0),c([u(cc.AnimationClip)],e.prototype,"pourWaterUpAnim",void 0),c([u({type:cc.AudioClip})],e.prototype,"soundPour",void 0),c([u({type:cc.AudioClip})],e.prototype,"soundFull",void 0),c([u(cc.Prefab)],e.prototype,"efx",void 0),e=c([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Constant":"Constant","./game":"game","./water":"water"}],game:[function(t,e,o){"use strict";cc._RF.push(e,"eff1bLsxSBNJYEdO3rkLEq1","game");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./map"),r=t("./bottle"),s=t("./Constant"),a=cc._decorator,l=a.ccclass,u=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chooseBottleScene=null,e.guide=[],e.listBottle=null,e.bottlePrefab=null,e.bottlePrefabArr=[],e.win=null,e.effNextLevel=null,e.btnReset=null,e.level=null,e.guide3=null,e.guide4=null,e.hand4=null,e.btnDownload=null,e.countDownTime=null,e.maps=Object.values(i.MAP),e.currMap=1,e.answer=null,e.isAnswer=!1,e.countAnswer=0,e.time=59,e.soundBg=null,e.soundEnd=null,e}return n(e,t),e.prototype.start=function(){cc.Global.BOTTLE_TYPE=0,cc.audioEngine.play(this.soundBg,!0,.5),cc.Canvas.instance.node.on(s.Constant.EVENT.CALL_WIN,this.onWin,this),cc.Canvas.instance.node.on(s.Constant.EVENT.CHOOSE_BOTTLE,this.onClickGuide4,this),this.effNextLevel.active=!1,this.btnReset.active=!1,this.new(),this.guide4.active=!0,this.setHand4(1),this.countDownTime.string=String(this.time),this.checkTimeOut()},e.prototype.new=function(){cc.Global.BOTTLE_ID_ACTIVE=null,cc.Global.BOTTLE_ID_TARGET=null,cc.Global.IS_POURING_WATER_UP=!1,cc.Global.POUR_WATER_AMOUNT=null,cc.Global.COUNT_POUR_WATER=0,cc.Global.COLOR_FINISH_ARRAY=[],cc.Global.WIN=0,this.win.active=!1,this.createListBottle()},e.prototype.onWin=function(){var t=this;if(this.guide4.active=!1,this.unscheduleAllCallbacks(),cc.audioEngine.playEffect(this.soundEnd,!1),this.currMap<i.MAP.MAP_3.level)return this.currMap++,void this.runSceneGame();this.scheduleOnce(function(){t.countDownTime.node.active=!1,t.countDownTime.unscheduleAllCallbacks(),t.win.active=!0,t.btnDownload.active=!1,t.currMap,t.maps.length},.5)},e.prototype.createListBottle=function(){this.listBottle.removeAllChildren(),this.level.string="Level "+this.currMap;var t=this.maps[this.currMap-1],e=t.array,o=t.pos;cc.Global.WIN=t.win;for(var n=0;n<e.length;n++){var c=cc.instantiate(this.bottlePrefabArr[cc.Global.BOTTLE_TYPE]);this.listBottle.addChild(c),c.setPosition(o[n]),c.getComponent(r.default).setData(n+1,e[n])}},e.prototype.getBottleById=function(t){for(var e=this.listBottle.children.map(function(t){return t.getComponent(r.default)}),o=0;o<e.length;o++)if(e[o].bottleId==t)return e[o];return null},e.prototype.runEffNextLevel=function(){this.effNextLevel.zIndex=cc.macro.MAX_ZINDEX,this.effNextLevel.active=!0,this.effNextLevel.opacity=0,this.effNextLevel.runAction(cc.sequence(cc.fadeIn(1),cc.callFunc(function(){this.nextLevel()}.bind(this)),cc.fadeOut(1),cc.callFunc(function(){this.effNextLevel.active=!1}.bind(this))))},e.prototype.runSceneGame=function(){this.effNextLevel.zIndex=cc.macro.MAX_ZINDEX,this.effNextLevel.active=!0,this.effNextLevel.opacity=0,this.effNextLevel.runAction(cc.sequence(cc.fadeIn(.4),cc.callFunc(function(){this.listBottle.active=!0,this.guide4.active=!0,this.new(),this.setHand4(2)}.bind(this)),cc.fadeOut(.4),cc.callFunc(function(){this.effNextLevel.active=!1}.bind(this))))},e.prototype.onChooseBottle=function(t,e){cc.Global.BOTTLE_TYPE=e,this.chooseBottleScene.active=!1,this.runSceneGame()},e.prototype.setHand4=function(t){var e=this.getBottleById(t),o=this.currMap==i.MAP.MAP_3.level?-200:-320;this.hand4.setPosition(e.node.position.add(cc.v3(50,o)))},e.prototype.onClickGuide4=function(){this.unscheduleAllCallbacks(),this.guide4.active=!1,this.scheduleOnce(function(){this.guide4.active=!0,this.checkGuide4()}.bind(this),3)},e.prototype.checkGuide4=function(){var t=this.getBottleById(1),e=this.getBottleById(2),o=this.getBottleById(3),n=this.getBottleById(4),c=this.getBottleById(5);this.getBottleById(6);switch(this.currMap){case i.MAP.MAP_1.level:cc.Global.BOTTLE_ID_ACTIVE?1==cc.Global.BOTTLE_ID_ACTIVE?this.setHand4(2):2==cc.Global.BOTTLE_ID_ACTIVE&&this.setHand4(1):this.setHand4(1);break;case i.MAP.MAP_2.level:cc.Global.BOTTLE_ID_ACTIVE?1==cc.Global.BOTTLE_ID_ACTIVE?1==t.colorArr.length?this.setHand4(2):this.setHand4(1):2==cc.Global.BOTTLE_ID_ACTIVE?2==e.colorArr.length||4==e.colorArr.length?this.setHand4(3):this.setHand4(1):3==cc.Global.BOTTLE_ID_ACTIVE&&this.setHand4(3):this.setHand4(2);break;case i.MAP.MAP_3.level:cc.Global.BOTTLE_ID_ACTIVE?1==cc.Global.BOTTLE_ID_ACTIVE?4==t.colorArr.length?3==c.colorArr.length?this.setHand4(5):2==n.colorArr.length?this.setHand4(4):1==o.colorArr.length?this.setHand4(3):(c.isFinish,this.setHand4(1)):3==t.colorArr.length?this.setHand4(4):2==t.colorArr.length?this.setHand4(3):1==t.colorArr.length&&this.setHand4(6):2==cc.Global.BOTTLE_ID_ACTIVE?e.isFinish||3==e.colorArr.length?this.setHand4(2):4==e.colorArr.length&&this.setHand4(4):3==cc.Global.BOTTLE_ID_ACTIVE?this.setHand4(3):4==cc.Global.BOTTLE_ID_ACTIVE?this.setHand4(4):5==cc.Global.BOTTLE_ID_ACTIVE?c.isFinish||3==c.colorArr.length?this.setHand4(5):4==c.colorArr.length&&(4==e.colorArr.length?this.setHand4(5):this.setHand4(2)):6==cc.Global.BOTTLE_ID_ACTIVE&&(1==t.colorArr.length?this.setHand4(1):this.setHand4(6)):3==e.colorArr.length?this.setHand4(5):4==e.colorArr.length&&(e.isFinish?this.setHand4(1):this.setHand4(2))}},e.prototype.onBtnReset=function(){this.new()},e.prototype.checkStorage=function(){var t=cc.Global.GetSetting(s.Constant.CURRENT_MAX_LEVEL_STORAGE,null);t&&!isNaN(t)||(cc.Global.SetSetting(s.Constant.CURRENT_MAX_LEVEL_STORAGE,1),t=1),cc.Global.CURRENT_MAX_LEVEL=t;var e=cc.Global.GetSetting(s.Constant.LEVEL_PLAYING_STORAGE,null);e&&!isNaN(e)||(cc.Global.SetSetting(s.Constant.LEVEL_PLAYING_STORAGE,1),e=1),cc.Global.CURRENT_LEVEL_PLAYING=e,this.currMap=cc.Global.CURRENT_LEVEL_PLAYING},e.prototype.setStorage=function(){cc.Global.CURRENT_MAX_LEVEL<this.currMap+1&&(cc.Global.CURRENT_MAX_LEVEL=this.currMap+1,cc.Global.SetSetting(s.Constant.CURRENT_MAX_LEVEL_STORAGE,cc.Global.CURRENT_MAX_LEVEL)),cc.Global.CURRENT_LEVEL_PLAYING=this.currMap+1,cc.Global.SetSetting(s.Constant.LEVEL_PLAYING_STORAGE,cc.Global.CURRENT_LEVEL_PLAYING)},e.prototype.onChooseLevel=function(t){this.currMap=t,cc.Global.CURRENT_LEVEL_PLAYING=t,cc.Global.SetSetting(s.Constant.LEVEL_PLAYING_STORAGE,cc.Global.CURRENT_LEVEL_PLAYING),this.new()},e.prototype.onClickGuide3=function(){this.unscheduleAllCallbacks(),this.guide[0].destroy(),this.guide3.active=!1;var t=this.maps[this.currMap-1].answer;t&&(this.isAnswer=!0,this.answer=t,this.autoPourWater())},e.prototype.offClickGuide3=function(){this.guide3.active=!1},e.prototype.autoPourWater=function(){if(this.countAnswer<=this.answer.length-1){var t=this.answer[this.countAnswer];this.getBottleById(t).getComponent(r.default).onTouchStart(),this.countAnswer++}else this.isAnswer=!1,cc.Canvas.instance.node.off(s.Constant.EVENT.AUTO_POUR_WATER,this.autoPourWater,this),this.currMap=5,this.runSceneGame()},e.prototype.offGuide_1=function(){this.guide[0].destroy()},e.prototype.offGuide_2=function(){},e.prototype.checkTimeOut=function(){this.time>0?(this.time--,this.countDownTime.scheduleOnce(function(){this.countDownTime.string=String(this.time),this.checkTimeOut()}.bind(this),1)):(this.guide4.active=!1,this.countDownTime.node.active=!1,this.countDownTime.unscheduleAllCallbacks(),this.win.active=!0,this.btnDownload.active=!1)},c([u(cc.Node)],e.prototype,"chooseBottleScene",void 0),c([u(cc.Node)],e.prototype,"guide",void 0),c([u(cc.Node)],e.prototype,"listBottle",void 0),c([u(cc.Prefab)],e.prototype,"bottlePrefab",void 0),c([u(cc.Prefab)],e.prototype,"bottlePrefabArr",void 0),c([u(cc.Node)],e.prototype,"win",void 0),c([u(cc.Node)],e.prototype,"effNextLevel",void 0),c([u(cc.Node)],e.prototype,"btnReset",void 0),c([u(cc.Label)],e.prototype,"level",void 0),c([u(cc.Node)],e.prototype,"guide3",void 0),c([u(cc.Node)],e.prototype,"guide4",void 0),c([u(cc.Node)],e.prototype,"hand4",void 0),c([u(cc.Node)],e.prototype,"btnDownload",void 0),c([u(cc.Label)],e.prototype,"countDownTime",void 0),c([u({type:cc.AudioClip})],e.prototype,"soundBg",void 0),c([u({type:cc.AudioClip})],e.prototype,"soundEnd",void 0),e=c([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Constant":"Constant","./bottle":"bottle","./map":"map"}],itemMap:[function(t,e,o){"use strict";cc._RF.push(e,"4213c3hKPBLc6qmuuFa/3Gm","itemMap");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Constant"),r=cc._decorator,s=r.ccclass,a=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=null,e.lock=null,e.block=null,e.mapId=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.setInfor=function(t){this.mapId=t,this.lock.active=!(this.mapId<=cc.Global.CURRENT_MAX_LEVEL),this.block.active=!(this.mapId<=cc.Global.CURRENT_MAX_LEVEL),this.level.string=this.mapId},e.prototype.onClickMap=function(){cc.Canvas.instance.node.emit(i.Constant.EVENT.CHOOSE_LEVEL,this.mapId)},c([a(cc.Label)],e.prototype,"level",void 0),c([a(cc.Node)],e.prototype,"lock",void 0),c([a(cc.Node)],e.prototype,"block",void 0),e=c([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Constant":"Constant"}],map:[function(t,e,o){"use strict";cc._RF.push(e,"3281czO+fZD+K4IOkzlglIb","map"),Object.defineProperty(o,"__esModule",{value:!0}),o.COLOR={YELLOW:{id:1,code:cc.Color.YELLOW},BLUE:{id:2,code:cc.Color.BLUE},RED:{id:3,code:cc.Color.ORANGE},COLOR_1:{id:4,code:cc.color(242,121,20,255)},COLOR_2:{id:5,code:cc.color(188,36,94,255)},COLOR_3:{id:6,code:cc.color(20,93,239,255)},COLOR_4:{id:7,code:cc.color(0,129,96,255)},COLOR_5:{id:8,code:cc.color(136,170,0,255)},COLOR_6:{id:9,code:cc.color(255,148,209,255)},COLOR_7:{id:10,code:cc.color(161,204,41,255)},COLOR_8:{id:11,code:cc.color(242,121,20,255)},COLOR_9:{id:12,code:cc.color(244,201,22,255)},COLOR_10:{id:13,code:cc.color(0,129,96,255)}};var n={POS_2:[cc.v2(-150,0),cc.v2(150,0)],POS_3:[cc.v2(-200,0),cc.v2(0,0),cc.v2(200,0)],POS_5:[cc.v2(-200,150),cc.v2(0,150),cc.v2(200,150),cc.v2(-100,-370),cc.v2(100,-370)],POS_6:[cc.v2(-200,150),cc.v2(0,150),cc.v2(200,150),cc.v2(-200,-370),cc.v2(0,-370),cc.v2(200,-370)]};o.MAP={MAP_1:{array:[[o.COLOR.COLOR_6],[o.COLOR.COLOR_6,o.COLOR.COLOR_6,o.COLOR.COLOR_6]],pos:n.POS_2,win:1,level:1},MAP_2:{array:[[o.COLOR.COLOR_7,o.COLOR.COLOR_7,o.COLOR.COLOR_7],[o.COLOR.COLOR_7,o.COLOR.COLOR_8],[o.COLOR.COLOR_8,o.COLOR.COLOR_8,o.COLOR.COLOR_8]],answer:null,pos:n.POS_3,win:2,level:2},MAP_3:{array:[[o.COLOR.COLOR_1,o.COLOR.COLOR_2,o.COLOR.COLOR_3,o.COLOR.COLOR_4],[o.COLOR.COLOR_5,o.COLOR.COLOR_5,o.COLOR.COLOR_5,o.COLOR.COLOR_3],[o.COLOR.COLOR_2,o.COLOR.COLOR_2,o.COLOR.COLOR_2],[o.COLOR.COLOR_3,o.COLOR.COLOR_3],[o.COLOR.COLOR_4,o.COLOR.COLOR_4,o.COLOR.COLOR_4,o.COLOR.COLOR_5],[o.COLOR.COLOR_1,o.COLOR.COLOR_1,o.COLOR.COLOR_1]],pos:n.POS_6,win:5,level:3},MAP_4:{array:[[o.COLOR.COLOR_9,o.COLOR.COLOR_10,o.COLOR.COLOR_9,o.COLOR.COLOR_10],[o.COLOR.COLOR_10,o.COLOR.COLOR_9,o.COLOR.COLOR_10,o.COLOR.COLOR_9],[]],answer:[2,3,1,2,1,3,2,1,2,3,1,2,1,3],pos:n.POS_3,win:2,level:4},MAP_5:{array:[[o.COLOR.BLUE,o.COLOR.RED,o.COLOR.YELLOW,o.COLOR.BLUE],[o.COLOR.BLUE,o.COLOR.RED,o.COLOR.YELLOW,o.COLOR.YELLOW],[o.COLOR.YELLOW,o.COLOR.RED,o.COLOR.BLUE,o.COLOR.RED],[],[]],pos:n.POS_5,win:3,level:5}},cc._RF.pop()},{}],water:[function(t,e,o){"use strict";cc._RF.push(e,"597289FXjtLg4OqJhcSmnXS","water");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Constant"),r=t("./bottle"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bottle=null,e.wave=null,e.waterId=null,e.bottleId=null,e.colorId=null,e.bottleData=null,e}return n(e,t),e.prototype.start=function(){this.wave.active=!1,this.bottleData=this.bottle.getComponent(r.default),cc.Canvas.instance.node.on(i.Constant.EVENT.CALL_POUR_WATER_DOWN,this.onCallPourWaterDown,this),cc.Canvas.instance.node.on(i.Constant.EVENT.CALL_POUR_WATER_UP,this.onCallPourWaterUp,this)},e.prototype.onDisable=function(){cc.Canvas.instance.node.off(i.Constant.EVENT.CALL_POUR_WATER_DOWN,this.onCallPourWaterDown,this),cc.Canvas.instance.node.off(i.Constant.EVENT.CALL_POUR_WATER_UP,this.onCallPourWaterUp,this)},e.prototype.onCallPourWaterDown=function(t,e,o){e==this.bottleId&&o==this.colorId&&(t==this.waterId&&(this.bottleData.colorArr.pop(),this.colorId=null),t-1==this.waterId&&cc.Global.COUNT_POUR_WATER+1<cc.Global.POUR_WATER_AMOUNT&&(this.node.getComponent(cc.Animation).play("pourWaterDown"),this.runWaterWave(!1)))},e.prototype.onCallPourWaterUp=function(t,e){cc.Global.BOTTLE_ID_TARGET!=this.bottleId||this.colorId||cc.Global.IS_POURING_WATER_UP||(this.colorId=t,this.node.color=e,this.node.getComponent(cc.Animation).play("pourWaterUp"),this.bottleData.colorArr.push(t),cc.Global.IS_POURING_WATER_UP=!0,this.runWaterWave(!0))},e.prototype.callPourWaterDown=function(){cc.Global.COUNT_POUR_WATER<cc.Global.POUR_WATER_AMOUNT&&cc.Canvas.instance.node.emit(i.Constant.EVENT.CALL_POUR_WATER_DOWN,this.waterId,this.bottleId,this.colorId),cc.Global.COUNT_POUR_WATER++,cc.Global.COUNT_POUR_WATER==cc.Global.POUR_WATER_AMOUNT&&cc.Canvas.instance.node.emit(i.Constant.EVENT.BOTTLE_BACK)},e.prototype.callPourWaterUp=function(){cc.Global.IS_POURING_WATER_UP=!1,cc.Canvas.instance.node.emit(i.Constant.EVENT.CALL_POUR_WATER_UP,this.colorId,this.node.color)},e.prototype.runWaterWave=function(t){this.wave.color=this.node.color,this.wave.stopAllActions(),this.wave.active=!0;var e=this.wave.position.x,o=cc.callFunc(function(){this.wave.active=!1}.bind(this));if(t){var n=this.bottleData.pourWaterUpAnim.duration;this.wave.setPosition(cc.v3(e,-50)),this.wave.runAction(cc.sequence(cc.moveBy(n,cc.v2(0,this.node.height)),o))}else{n=this.bottleData.pourWaterDownAnim.duration;this.wave.setPosition(cc.v3(e,this.node.height-50)),this.wave.runAction(cc.sequence(cc.moveBy(n,cc.v2(0,-this.node.height)),o))}},c([l(cc.Node)],e.prototype,"bottle",void 0),c([l(cc.Node)],e.prototype,"wave",void 0),e=c([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Constant":"Constant","./bottle":"bottle"}]},{},["AdManager","ChooseMap","Constant","Global","bottle","game","itemMap","map","water"]);